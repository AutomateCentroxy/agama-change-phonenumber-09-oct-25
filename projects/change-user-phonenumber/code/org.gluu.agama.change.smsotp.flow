Flow org.gluu.agama.change.smsotp
     Basepath ""
     Timeout 900 seconds
     Inputs PhonenumberUpdateService username phone
// Log flow imputs provided by the flow caller.
Log "@info Information received from the caller: " username phone
// Declare feedback Variable
otpUiFeedback = {}
resendCount = 0
validationAttempts = 0
maxSMS = Repeat 20 times max
     RRF "__________" 
     When 
          Log "@ " __________
          When 
     Otherwise
          Log "@ " __________
          Call __________#__________ 
          Log "@ " __________
          When 
               Log "@ " __________
               Iterate over  using item
          Otherwise
               Call __________#__________ 
               Log "@ " __________
               When 
                    Log "@ " __________
                    Finish __________
               Otherwise
                    Log "@ " __________
// "OTP verification loop completed"
Log "@info OTP verification loop completed"
it_loopmax = { success: false, error: "UnexpectedLoopCompletion" }
// SMS OTP error
Finish it_loopmax